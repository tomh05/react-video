/*
 * React Video - React component to load video from Vimeo or Youtube across any device
 * @version v1.5.3
 * @link https://github.com/pedronauck/react-video
 * @license MIT
 * @author Pedro Nauck (https://github.com/pedronauck)
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactVideo=t(require("react")):e.ReactVideo=t(e.React)}(this,function(e){return function(e){function t(i){if(o[i])return o[i].exports;var r=o[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){var i=o(1),r=(o(2),o(3)),n=o(4),s=o(5);e.exports=i.createClass({displayName:"Video",propTypes:{from:i.PropTypes.oneOf(["youtube","vimeo","vine"]),videoId:i.PropTypes.string,onError:i.PropTypes.func},getDefaultProps:function(){return{className:"video"}},getInitialState:function(){return{thumb:null,imageLoaded:!1,showingVideo:!1}},isYoutube:function(){return"youtube"===this.props.from},isVimeo:function(){return"vimeo"===this.props.from},isVine:function(){return"vine"===this.props.from},componentWillReceiveProps:function(e){e.className===this.props.className&&e.from===this.props.from&&e.videoId===this.props.videoId||this.setState({thumb:null,imageLoaded:!1,showingVideo:!1})},componentDidMount:function(){this.state.imageLoaded||(this.isYoutube()&&this.fetchYoutubeData(),this.isVimeo()&&this.fetchVimeoData(),this.isVine()&&this.fetchVineData())},componentDidUpdate:function(){this.state.imageLoaded||(this.isYoutube()&&this.fetchYoutubeData(),this.isVimeo()&&this.fetchVimeoData(),this.isVine()&&this.fetchVineData())},render:function(){return i.createElement("div",{className:this.props.className+" video"},!this.state.imageLoaded&&i.createElement(s,null),this.props.title&&this.renderTitle(this.props.title),this.renderImage(),this.renderIframe())},renderTitle:function(e){return i.createElement("div",{className:"video-title",style:this.props.titleStyle},i.createElement("h1",null,e))},renderImage:function(){var e={backgroundImage:"url("+this.state.thumb+")"};return this.state.imageLoaded&&!this.state.showingVideo?i.createElement("div",{className:"video-image",style:e},i.createElement(n,{onClick:this.playVideo})):void 0},renderIframe:function(){var e={display:this.state.showingVideo?"block":"none",width:"100%",height:"100%",backgroundImage:"url("+this.state.thumb+")"};return this.state.showingVideo?i.createElement("div",{className:"video-embed",style:e},i.createElement("iframe",{frameBorder:"0",src:this.getIframeUrl()})):void 0},playVideo:function(e){this.setState({showingVideo:!0}),e.preventDefault()},getIframeUrl:function(){if(this.isYoutube()){if(this.props.videoId)return"//youtube.com/embed/"+this.props.videoId+"?autoplay=1";if(this.props.playlistId)return"//youtube.com/embed?listType=playlist&list="+this.props.playlistId+"&disablekb=1&autoplay=1&showinfo=1"}else{if(this.isVimeo())return"//player.vimeo.com/video/"+this.props.videoId+"?autoplay=1";if(this.isVine())return"//vine.co/v/"+this.props.videoId+"/embed/simple"}},fetchYoutubeData:function(){var e=this.props.videoId,t=this.props.image?this.props.image:"http://img.youtube.com/vi/"+e+"/0.jpg";this.setState({thumb:t,imageLoaded:!0})},fetchVimeoData:function(){var e=this.props.videoId,t=this;r.get({url:"//vimeo.com/api/v2/video/"+e+".json",onSuccess:function(e,o){t.setState({thumb:o[0].thumbnail_large,imageLoaded:!0})},onError:t.props.onError})},fetchVineData:function(){console.log("fetching vine");var e=this.props.videoId,t=this;r.get({url:"//vine.co/oembed.json?url=https%3A%2F%2Fvine.co%2Fv%2F"+e,onSuccess:function(e,o){console.log("got ajax"),console.log(o),t.setState({thumb:o.thumbnail_url,imageLoaded:!0})},onError:t.props.onError})}})},function(t,o){t.exports=e},function(e,t){e.exports=function(e){return"object"!=typeof e?Array.prototype.join.call(arguments," "):Object.keys(e).filter(function(t){return e[t]}).join(" ")}},function(e,t){t.get=function(e){var t=e.url,o=e.onSuccess,i=e.onError,r=!1,n=function(){o(null,JSON.parse(r.responseText))},s=function(){if(4===r.readyState)if(200===r.status)o(null,JSON.parse(r.responseText));else{var e={error:"Sorry, an error ocurred on the server"};if(i&&"function"==typeof i)return i(e);o(e,null)}},a=function(){var e={error:"Sorry, an error ocurred on the server"};return i&&"function"==typeof i?i(e):void o(e,null)};try{r=new XDomainRequest,r.onload=n}catch(u){r=new XMLHttpRequest,r.onreadystatechange=s}r.onerror=a,r.open("GET",t,!0),r.send()}},function(e,t,o){var i=o(1);e.exports=i.createClass({displayName:"exports",propTypes:{onClick:i.PropTypes.func},render:function(){return i.createElement("a",{className:"video-play-button",onClick:this.props.onClick},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 100 100"},i.createElement("path",{d:"M79.674,53.719c2.59-2.046,2.59-5.392,0-7.437L22.566,1.053C19.977-0.993,18,0.035,18,3.335v93.331c0,3.3,1.977,4.326,4.566,2.281L79.674,53.719z"})))}})},function(e,t,o){var i=o(1);e.exports=i.createClass({displayName:"exports",render:function(){return i.createElement("div",{className:"video-loading"},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"32",height:"32"},i.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),i.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}})}])});